---
- name: Nginx | Installation
  include_tasks: "pkgmgr/{{ ansible_pkg_mgr }}.yml"

- name: Nginx | Ensure Nginx service is enabled and started
  service:
    name: nginx
    enabled: yes
    state: started

- name: Ntp | Ensure ntp service is enabled and started on "CentOS"
  service:
    name: ntpd
    enabled: yes
    state: started
  when:
    - ansible_facts['distribution'] == "CentOS"

- name: Ntp | Ensure ntp service is enabled and started on "CentOS"
  service:
    name: ntp
    enabled: yes
    state: started
  when:
    - ansible_facts['distribution'] == "Debian"

# Create the WiFi directory if no present
- name: Creates directory
  file:
    path: /etc/wpa_supplicant/
    state: directory

- name: wpa_supplicant.conf file
  copy: src=wpa_supplicant.conf dest=/etc/wpa_supplicant/wpa_supplicant.conf
  when:
    - ansible_facts['distribution'] == "Debian"


#- name: Fail2ban | Manually activate fail2ban
#  command: service fail2ban start
#  register: fail2ban_output
#
#- name: Fail2ban | Ensure fail2ban service is enabled and started
#  service:
#    name: fail2ban
#    enabled: yes
#    state: started